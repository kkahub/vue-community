import{s as L,u as M,aI as B,o as i,i as v,q as l,j as a,a8 as x,aJ as T,c as e,aG as o,t as r,a as q,d as _,F as C,f as w,ad as b,w as g,aa as Q,ag as I}from"./index.874bc42f.js";import{Q as A}from"./QChip.d224f1d6.js";import{u as D,a as H,_ as y}from"./useBookmark.a021a839.js";import{b as N}from"./post.11e1026b.js";function R(t=new Date("2024-02-26")){const s=new Intl.RelativeTimeFormat("ko",{numeric:"auto"}),h=new Date,n=Math.abs(t-h),k=Math.floor(n/1e3),m=Math.floor(k/60),d=Math.floor(m/60),u=Math.floor(d/24),c=Math.floor(u/365);return console.log("seconds: ",c),c>0?s.format(-1*c,"year"):u>0?s.format(-1*u,"day"):d>0?s.format(-1*d,"hour"):m>0?s.format(-1*m,"minute"):s.format(-1*k,"second")}const S=["src"],F={class:"flex items-center"},U=e("span",{class:"q-mx-xs"},"\xB7",-1),V={class:"text-h6 q-mt-sm"},$={class:"text-primary text-caption"},j={key:0,class:"text-grey-6 q-my-sm ellipsis-2-lines"},P=["innerHTML"],E={class:"row items-center"},G={class:"col-3"},J={class:"flex flex-center"},O={class:"col-3"},z={class:"flex flex-center"},K={class:"col-3"},W={class:"flex flex-center"},X={class:"col-3"},Y={class:"flex flex-center"},Z={__name:"PostItem",props:{item:{type:Object,default:()=>({})},escapeHTML:{type:Boolean,default:!1}},setup(t){const s=t;L(M());const{isLike:h,likeCount:n,toggleLike:k}=D(s.item.id,{initialCount:s.item.likeCount}),{isBookmark:m,bookmarkCount:d,toggleBookmark:u}=H(s.item.id,{initialCount:s.item.bookmarkCount}),{state:c}=B(()=>N(s.item.uid),{});return(ee,te)=>(i(),v(Q,{class:"bg-white q-pt-md",clickable:"",to:`/posts/${t.item.id}`},{default:l(()=>[a(x,{avatar:"",top:""},{default:l(()=>[a(T,null,{default:l(()=>{var f;return[e("img",{src:(f=o(c))==null?void 0:f.photoURL,alt:""},null,8,S)]}),_:1})]),_:1}),a(x,null,{default:l(()=>{var f;return[e("div",F,[e("span",null,r((f=o(c))==null?void 0:f.displayName),1),U,e("span",null,r(o(R)(t.item.createdAt)),1),a(A,{class:"q-ml-sm",dense:"",color:"primary","text-color":"white"},{default:l(()=>[q(r(t.item.category),1)]),_:1})]),e("div",V,r(t.item.title),1),e("div",$,[(i(!0),_(C,null,w(t.item.tags,p=>(i(),_("span",{key:p,class:"q-mr-sm"}," #"+r(p),1))),128))]),t.escapeHTML?(i(),_("div",j,r(t.item.content),1)):(i(),_("div",{key:1,class:"text-grey-6 q-my-sm ellipsis-2-lines",innerHTML:t.item.content},null,8,P)),e("div",E,[e("div",G,[e("div",J,[a(y,{name:"sym_o_visibility",label:t.item.readCount,tooltip:"\uC870\uD68C\uC218"},null,8,["label"])])]),e("div",O,[e("div",z,[a(y,{name:"sym_o_sms",label:t.item.commentCount,tooltip:"\uB313\uAE00\uC218"},null,8,["label"])])]),e("div",K,[e("div",W,[a(b,{class:"full-width",flat:"",dense:"",onClick:g(o(k),["prevent"])},{default:l(()=>[a(y,{name:o(h)?"favorite":"sym_o_favorite",label:o(n),tooltip:"\uC88B\uC544\uC694"},null,8,["name","label"])]),_:1},8,["onClick"])])]),e("div",X,[e("div",Y,[a(b,{class:"full-width",flat:"",dense:"",onClick:g(o(u),["prevent"])},{default:l(()=>[a(y,{name:o(m)?"bookmark":"sym_o_bookmark",label:o(d),tooltip:"\uBD81\uB9C8\uD06C"},null,8,["name","label"])]),_:1},8,["onClick"])])])])]}),_:1})]),_:1},8,["to"]))}},ie={__name:"PostList",props:{items:Array,default:()=>[]},setup(t){return(s,h)=>(i(),v(I,{bordered:"",separator:""},{default:l(()=>[(i(!0),_(C,null,w(t.items,n=>(i(),v(Z,{key:n.id,item:n},null,8,["item"]))),128))]),_:1}))}};export{ie as _};

import{s as C,u as T,aI as w,o as i,i as p,q as l,j as a,a8 as x,aJ as B,c as t,aG as o,t as r,a as q,d as _,F as M,f as g,ad as b,w as L,aa as H,ag as Q}from"./index.8c00725b.js";import{Q as I}from"./QChip.1ef4322a.js";import{u as A,a as D,_ as y}from"./useBookmark.eb44ff3b.js";import{b as N}from"./post.9c5d6995.js";function R(e=new Date("2024-02-26")){const s=new Intl.RelativeTimeFormat("ko",{numeric:"auto"}),h=new Date,n=Math.abs(e-h),k=Math.floor(n/1e3),m=Math.floor(k/60),d=Math.floor(m/60),u=Math.floor(d/24),c=Math.floor(u/365);return console.log("seconds: ",c),c>0?s.format(-1*c,"year"):u>0?s.format(-1*u,"day"):d>0?s.format(-1*d,"hour"):m>0?s.format(-1*m,"minute"):s.format(-1*k,"second")}const S=["src"],F={class:"flex items-center"},U=t("span",{class:"q-mx-xs"},"\xB7",-1),V={class:"text-h6 q-mt-sm"},$={class:"text-primary text-caption"},j={key:0,class:"text-grey-6 q-my-sm ellipsis-2-lines"},P=["innerHTML"],E={class:"row items-center"},G={class:"col-3"},J={class:"flex flex-center"},O={class:"col-3"},z={class:"flex flex-center"},K={class:"col-3"},W={class:"flex flex-center"},X={class:"col-3"},Y={class:"flex flex-center"},Z={__name:"PostItem",props:{item:{type:Object,default:()=>({})},escapeHTML:{type:Boolean,default:!1}},setup(e){const s=e;C(T());const{isLike:h,likeCount:n,toggleLike:k}=A(s.item.id,{initialCount:s.item.likeCount}),{isBookmark:m,bookmarkCount:d,toggleBookmark:u}=D(s.item.id,{initialCount:s.item.bookmarkCount}),{state:c}=w(()=>N(s.item.uid),{});return(ee,te)=>(i(),p(H,{class:"bg-white q-pt-md",clickable:"",to:`/posts/${e.item.id}`},{default:l(()=>[a(x,{avatar:"",top:""},{default:l(()=>[a(B,null,{default:l(()=>{var f;return[t("img",{src:(f=o(c))==null?void 0:f.photoURL,alt:""},null,8,S)]}),_:1})]),_:1}),a(x,null,{default:l(()=>{var f;return[t("div",F,[t("span",null,r((f=o(c))==null?void 0:f.displayName),1),U,t("span",null,r(o(R)(e.item.createdAt)),1),a(I,{class:"q-ml-sm",dense:"",color:"primary","text-color":"white"},{default:l(()=>[q(r(e.item.category),1)]),_:1})]),t("div",V,r(e.item.title),1),t("div",$,[(i(!0),_(M,null,g(e.item.tags,v=>(i(),_("span",{key:v,class:"q-mr-sm"}," #"+r(v),1))),128))]),e.escapeHTML?(i(),_("div",j,r(e.item.content),1)):(i(),_("div",{key:1,class:"text-grey-6 q-my-sm ellipsis-2-lines",innerHTML:e.item.content},null,8,P)),t("div",E,[t("div",G,[t("div",J,[a(y,{name:"sym_o_visibility",label:e.item.readCount,tooltip:"\uC870\uD68C\uC218"},null,8,["label"])])]),t("div",O,[t("div",z,[a(y,{name:"sym_o_sms",label:e.item.commentCount,tooltip:"\uB313\uAE00\uC218"},null,8,["label"])])]),t("div",K,[t("div",W,[a(b,{class:"full-width",flat:"",dense:"",onClick:L(o(k),["prevent"])},{default:l(()=>[a(y,{name:o(h)?"favorite":"sym_o_favorite",label:o(n),tooltip:"\uC88B\uC544\uC694"},null,8,["name","label"])]),_:1},8,["onClick"])])]),t("div",X,[t("div",Y,[a(b,{class:"full-width",flat:"",dense:"",onClick:L(o(u),["prevent"])},{default:l(()=>[a(y,{name:o(m)?"bookmark":"sym_o_bookmark",label:o(d),tooltip:"\uBD81\uB9C8\uD06C"},null,8,["name","label"])]),_:1},8,["onClick"])])])])]}),_:1})]),_:1},8,["to"]))}},ie={__name:"PostList",props:{items:Array,default:()=>[],escapeHTML:{type:Boolean,default:!1}},setup(e){return(s,h)=>(i(),p(Q,{bordered:"",separator:""},{default:l(()=>[(i(!0),_(M,null,g(e.items,n=>(i(),p(Z,{key:n.id,item:n,escapeHTML:e.escapeHTML},null,8,["item","escapeHTML"]))),128))]),_:1}))}};export{ie as _};
